<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Javascript - task 1</title>
	<style type="text/css">
		.form-wrapper h2 {
			text-align: center;
			margin-bottom: 30px;
		}
		form.custom-form {
		    max-width: 500px;
		    margin: 50px auto;
		}
		.form-group label {
		    display: block;
		    margin-bottom: 6px;
		    text-align: left;
		}
		.form-group {
			margin-bottom: 15px;
			text-align: center;
		}
		.form-group input {
			width: 100%;
			border: 1px solid #aaa;
			border-radius: 5px;
			height: 34px;
			padding: 5px 15px;
			box-sizing: border-box;
		}
		.form-group button {
			background: #777;
			color: #fff;
			border-color: #aaa;
			padding: 9px 15px;
			border-radius: 5px;
			box-shadow: none;
			outline: none;
			font-size: 16px;
			font-weight: 600;
			border: none;
			display: inline-block;
			margin: 10px auto;
		}
	</style>
</head>
<body>
     <div class="form-wrapper">
     	<h2>JavaScript Task - 1</h2>
	     <form class="custom-form" name="myForm" onsubmit="return validateForm();" method="post">
		  	<div class="form-group">
		  		<label>Name</label>
		  		<input type="text" name="Name" />
		  	</div>
		  	<div class="form-group">
		  		<label>Email</label>
		  		<input type="text" name="Email" />
		  	</div>
		  	<div class="form-group">
		  		<label>Phone Number</label>
		  		<input type="text" name="Phone" />
		  	</div>
		  	<div class="form-group">
		  		<label>Zipcode</label>
		  		<input type="text" name="Zipcode" />
		  	</div>
		  	<div class="form-group">
		  		<label>Date of Birth</label>
		  		<input placeholder="mm-dd-yyyy or mm/dd/yyyy" type="text" name="Date" />
		  	</div>
		  	<div class="form-group">
		  		<button type="submit">Submit</button>
		  	</div>
		</form>
	</div>
	<script type="text/javascript">
		// "use strict";
		function validateForm() {
			let name = document.forms.myForm.Name;
			let email = document.forms.myForm.Email;
			let phone = document.forms.myForm.Phone;
			let zipcode = document.forms.myForm.Zipcode;
			let birthdate = document.forms.myForm.Date;
			//field pattern
			let emailPattern = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/g;
			let phonePattern=/^\d{10}$/;
			// let zipcoePattern = /(^\d{6}$)/;	
			let zipcoePattern = /^[1-9]{1}[0-9]{2}\s{0,1}[0-9]{3}$/;
			// let datePattern = /^\d\d\/\d\d\/\d\d\d\d$/;	
			let datePattern = /^(0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])[\/\-]\d{4}$/;

			if (name.value == "") {
				window.alert("Please enter name");
				name.focus();
				return false;
			}
			if (!isNaN(name.value)) {
				window.alert("Please enter valid name");
				name.focus();
				return false;
			}
			if (email.value == "") {
				window.alert("Please enter email");
				email.focus();
				return false;
			}
			if (!emailPattern.test(email.value)) {
				window.alert("Please enter valid email");
				email.focus();
				return false;
			}
			if (phone.value == "") {
				window.alert("Please enter phone number");
				phone.focus();
				return false;
			}
			if (!phonePattern.test(phone.value)) {
				window.alert("Please enter valid phone number");
				phone.focus();
				return false;
			}
			if (zipcode.value == "") {
				window.alert("Please enter zipcode");
				zipcode.focus();
				return false;
			}
			if (!zipcoePattern.test(zipcode.value)) {
				window.alert("Please enter valid zipcode");
				zipcode.focus();
				return false;
			}
			if (birthdate.value == "") {
				window.alert("Please enter birthdate");
				birthdate.focus();
				return false;
			}
			// if (!datePattern.test(birthdate.value)) {
			// 	window.alert("Please enter valid birthdate");
			// 	birthdate.focus();
			// 	return false;
			// }
			if(datePattern.test(birthdate.value))
			{

		  		birthdate.focus();
			  	//Test which seperator is used '/' or '-'
			  	var opera1 = birthdate.value.split('/');
			  	var opera2 = birthdate.value.split('-');
			  	lopera1 = opera1.length;
			  	lopera2 = opera2.length;
			  	// Extract the string into month, date and year
			  	if (lopera1>1)
			  	{
			  		var pdate = birthdate.value.split('/');
			  	}
			  	else if (lopera2>1)
			  	{
			  		var pdate = birthdate.value.split('-');
			  	}
			  	var mm  = parseInt(pdate[0]);
			  	var dd = parseInt(pdate[1]);
			  	var yy = parseInt(pdate[2]);
			  	// Create list of days of a month [assume there is no leap year by default]
			  	var ListofDays = [31,28,31,30,31,30,31,31,30,31,30,31];
			  	if (mm==1 || mm>2)
			  	{
				  if (dd>ListofDays[mm-1])
				  {
				  alert('Invalid date format!');
				  birthdate.focus();
				  return false;
				  }
		  		}
			  	if (mm==2)
			  	{
			  		var lyear = false;
				  	if ( (!(yy % 4) && yy % 100) || !(yy % 400)) 
				  	{
				  		lyear = true;
				  	}
				  	if ((lyear==false) && (dd>=29))
				  	{
				  		birthdate.focus();
					  	alert('Invalid date format!');
					  	return false;
				  	}
				  	if ((lyear==true) && (dd>29))
				  	{				  		
					  	alert('Invalid date format!');
					  	birthdate.focus();
					  	return false;
				  	}
			  	}
			}
			else
			{
			  	alert("Invalid date format!");
			  	birthdate.focus();
			  	return false;
			}
			
			window.alert("Data submitted successfully");
			// return true;
		}

	</script>
</body>

</html>
